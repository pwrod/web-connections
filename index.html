<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ipscanning</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Press+Start+2P&family=Inter:wght@300;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#050509;
    --panel:#071018;
    --neon:#7CFFB2;
    --danger:#FF4D4D;
    --muted:#9fb2bd;
    --glass: rgba(255,255,255,0.03);
    --ransom-bg: rgba(20,6,6,0.96);
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--muted);-webkit-font-smoothing:antialiased}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;box-sizing:border-box}
  .card{width:100%;max-width:1100px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:20px;box-shadow:0 12px 60px rgba(0,0,0,0.65);display:grid;grid-template-columns:1fr 380px;gap:16px;position:relative}
  .terminal{background:linear-gradient(180deg,var(--panel), #03121a 120%);border-radius:8px;padding:18px;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  .term-header{display:flex;align-items:center;gap:8px;margin-bottom:12px}
  .dot{width:12px;height:12px;border-radius:50%}
  .dot.red{background:#ff6b6b}
  .dot.yellow{background:#ffd166}
  .dot.green{background:#7ebd7e}
  .title{color:var(--muted);font-weight:600;font-size:14px;margin-left:6px}

  .code-area{font-family:'Share Tech Mono', monospace;color:var(--neon);font-size:13px;line-height:1.42;white-space:pre-wrap;max-height:520px;overflow:hidden;position:relative;padding-right:6px}
  .line{opacity:0.95}
  .warn{color:var(--danger);font-weight:700}
  .hex{color:#9be7ff}
  .muted{color:var(--muted);font-weight:400;font-size:12px}

  .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:8px;padding:16px;display:flex;flex-direction:column;gap:12px;border:1px solid rgba(255,255,255,0.03)}
  .big-alert{background:linear-gradient(90deg, rgba(255,0,0,0.06), rgba(255,0,0,0.02));border-radius:8px;padding:12px;color:var(--danger);font-weight:700;text-align:center}
  .status-list{display:flex;flex-direction:column;gap:8px;overflow:auto}
  .status-item{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:6px;background:var(--glass)}
  .node{width:12px;height:12px;border-radius:50%}
  .node.compromised{background:var(--danger)}
  .node.safe{background:#5c9cff}
  .muted-small{color:var(--muted);font-size:12px}

  .progress{height:12px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,0.02)}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--danger),#ffb3b3);transition:width 500ms linear}

  .controls{display:flex;gap:8px;margin-top:8px;align-items:center}
  .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer;font-weight:600}
  .btn.danger{border-color:var(--danger);color:var(--danger)}
  .small{font-size:12px;padding:6px 8px;border-radius:6px}
  .muted-note{font-size:12px;color:var(--muted);margin-top:6px}

  /* Modal styles */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:60}
  .modal{width:92%;max-width:920px;background:linear-gradient(180deg,var(--ransom-bg), rgba(40,8,8,0.88));border-radius:14px;padding:28px;box-shadow:0 30px 120px rgba(0,0,0,0.8);color:#fff;border:2px solid rgba(255,0,0,0.08);position:relative;overflow:hidden;font-family:'Press Start 2P', monospace}
  .modal h1{margin:0 0 10px 0;color:var(--danger);font-size:20px;letter-spacing:1px}
  .modal .sub{font-family:'Share Tech Mono', monospace;color:#ffd6d6;font-size:11px;margin-bottom:16px}
  .countdown{font-size:48px;line-height:1;color:#fff;background:rgba(0,0,0,0.12);display:inline-block;padding:8px 14px;border-radius:8px}
  .ransom-note{background:rgba(0,0,0,0.18);padding:14px;border-radius:8px;margin-top:16px;color:#ffd9c6;font-size:12px;max-height:260px;overflow:auto;border:1px dashed rgba(255,255,255,0.04)}
  .ransom-note p{margin:0 0 10px 0;color:#ffd9c6}
  .ransom-actions{display:flex;gap:10px;margin-top:14px;align-items:center}
  .fake-pay{background:linear-gradient(90deg,var(--danger),#ff8a8a);padding:10px 14px;border-radius:8px;border:none;color:#200;font-weight:800;cursor:not-allowed;opacity:0.95}
  .decrypt-btn{background:linear-gradient(90deg,#a7ffdd,#7CFFB2);padding:10px 14px;border-radius:8px;border:none;color:#042;font-weight:800;cursor:pointer}
  .dismiss-small{font-size:12px;color:#ffd6d6;opacity:0.9;margin-left:8px}

  .notice-top{position:absolute;right:20px;top:20px;font-size:12px;color:#ffdede;opacity:0.9}

  /* small screen */
  @media (max-width:920px){.card{grid-template-columns:1fr;max-width:920px}.code-area{max-height:360px}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-label="">
      <div class="terminal" aria-hidden="false">
        <div class="term-header" aria-hidden="true">
          <div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div>
          <div class="title">NETWORK@CODE:XIM — <span class="muted">XIM.exe</span></div>
        </div>
        <div class="code-area" id="codeArea" aria-live="polite" role="log"></div>
      </div>

      <aside class="panel" aria-label="Incident status panel">
        <div class="big-alert" role="status" aria-live="assertive">ALERT: Geolocation</div>
        <div class="status-list" id="statusList"></div>
        <div>
          <div class="muted-small">Spread progress</div>
          <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="prog"><i></i></div>
        </div>

        <div class="controls">
          <button class="btn small" id="pauseBtn">Pause stream</button>
          <button class="btn small" id="fasterBtn">Faster</button>
          <button class="btn danger small" id="resetBtn">Reset (safe)</button>
        </div>
        <div class="muted-note"></div>
      </aside>
    </div>
  </div>

  <!-- Modal (big warning + countdown + ransom note) -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-label="Ransom notice">
    <div class="modal" role="document" aria-labelledby="ransomTitle">
      <div class="notice-top">NETWORK ACTIVITY</div>
      <h1 id="ransomTitle">SYSTEM ENCRYPTED</h1>
      <div class="sub">All important files are encrypted. Your system will remain locked until the timer reaches zero.</div>

      <div style="display:flex;align-items:center;gap:20px;flex-wrap:wrap">
        <div class="countdown" id="countdown">01:30</div>
        <div style="max-width:520px">
          <div style="color:#ffd6d6;font-size:12px">To recover your files:</div>
          <div class="ransom-note" id="ransomNote">
            <p>— All of your documents, photos, and databases have been encrypted using a unique key per machine.</p>
            <p>— We hold the only decryptor. Attempting recovery by third-party tools will result in permanent data loss.</p>
            <p>— To receive the decryptor, you must pay the equivalent of <strong>0.15 BTC</strong>to the provided address and then use the provided token.</p>
            <p style="color:#ffd6d6;font-weight:700">Payment address: <span style="font-family:'Share Tech Mono',monospace;color:#fff">bcfi4fiscij8qa0p23cxwjx1dhjaqhx28spl2y5v</span></p>
            <p style="opacity:0.9">Once payment is verified, the decryptor link will become active. You have limited time.</p>
          </div>
        </div>
      </div>

      <div class="ransom-actions" aria-hidden="false">
        <button class="fake-pay" id="fakePayBtn" title="Disabled">Pay (disabled)</button>
        <button class="decrypt-btn" id="decryptBtn" disabled>Activate Decryptor</button>
        <div class="dismiss-small"></div>
      </div>

    </div>
  </div>

<script>
/* ===================================================================
   Harmless visual-only ransomware-style modal + code stream.
   NO network calls, NO eval, NO file access. Cosmetic only.
   =================================================================== */

const fakeTemplates = [
  '[TRACE] connection from {ip} established (proto: {proto}) /* NO ACTION */',
  '[WARNING] Unverified payload at /tmp/{file} - checksum {hex}',
  'spawn_process("{proc}") -> PID {pid} (sandboxed)',
  '[IO] write /var/log/.sys_{id}: {hex}',
  '[NET] broadcast to subnet {subnet} - packet_size={num}',
  '[SHELL] rm -rf /nonexistent/{id} /* simulated only */',
  'fork() -> child {pid} (simulating spread)',
  '[DETECT] heuristic score {score} -> flagged (simulated)',
  'decrypting payload... {dots}',
  '[HEARTBEAT] node {n} alive -> latency {lat}ms',
  'registry.update("{key}", "{val}") /* harmless */',
  '[INJECT] attempted into process {proc} -> blocked (sim)',
  'writing quarantine token: {hex}'
];

const prots = ['TCP','UDP','ICMP','HTTP','HTTPS'];
const procs = ['svchost','kernel_task','nginx','apache2','wpa_supplicant','xhci_hcd'];
const hexChars = 'abcdef0123456789';
const codeArea = document.getElementById('codeArea');
const statusList = document.getElementById('statusList');
const progBar = document.querySelector('#prog > i');

let running=true;
let speed=1100; // ms between lines
let progress=0;
let maxNodes=9;

function randomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
function randHex(len){let s=''; for(let i=0;i<len;i++) s+=hexChars[randomInt(0,hexChars.length-1)]; return s}
function pick(arr){return arr[randomInt(0,arr.length-1)]}
function dots(){const n=randomInt(1,6); return '.'.repeat(n)}

/* ---------- NEW: generate a fresh, random IPv4 for every insertion ---------- */
function randomIP(){
  // produce realistic-looking IPv4: avoid 0/255 at ends; allow 0-255 in middle octets
  const a = randomInt(1,254);
  const b = randomInt(0,255);
  const c = randomInt(0,255);
  const d = randomInt(1,254);
  return `${a}.${b}.${c}.${d}`;
}

/* ---------- node list (status panel) ---------- */
const nodes = [];
for(let i=1;i<=maxNodes;i++){
  nodes.push({name:`HOST-${(300+i)}`, status: Math.random() < 0.18 ? 'compromised' : 'safe'});
}
renderNodes();

function renderNodes(){
  statusList.innerHTML = '';
  nodes.forEach((n)=>{
    const item = document.createElement('div');
    item.className='status-item';
    item.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center">
        <div class="node ${n.status==='compromised' ? 'compromised':'safe'}" aria-hidden="true"></div>
        <div>
          <div style="font-weight:700">${n.name}</div>
          <div class="muted-small">${n.status==='compromised' ? 'Compromised — containment active' : 'Healthy — sandboxed'}</div>
        </div>
      </div>
      <div class="muted-small">${n.status==='compromised' ? '!!':'OK'}</div>
    `;
    statusList.appendChild(item);
  });
}

/* ---------- line generation uses randomIP() now ---------- */
function makeLine(){
  let t = pick(fakeTemplates);
  t = t.replace('{ip}', randomIP());               // <-- random IP each time
  t = t.replace('{proto}', pick(prots));
  t = t.replace('{file}', `payload_${randHex(5)}.bin`);
  t = t.replace('{hex}', randHex(12));
  t = t.replace('{proc}', pick(procs));
  t = t.replace('{pid}', String(randomInt(2000,9999)));
  t = t.replace('{id}', randHex(4));
  t = t.replace('{subnet}', `192.168.${randomInt(0,255)}.0/24`);
  t = t.replace('{num}', String(randomInt(64,1500)));
  t = t.replace('{score}', (Math.random()*100).toFixed(1));
  t = t.replace('{dots}', dots());
  t = t.replace('{n}', String(randomInt(1,maxNodes)));
  t = t.replace('{lat}', String(randomInt(1,400)));
  t = t.replace('{key}', `HKLM\\Software\\${randHex(4)}`);
  t = t.replace('{val}', `0x${randHex(6)}`);
  return t;
}

function pushLine(){
  if(!running) return;
  const lineText = makeLine();
  const lineEl = document.createElement('div');
  lineEl.className = 'line';
  if(lineText.includes('WARNING')||lineText.includes('Unverified')||lineText.includes('Compromised')||lineText.includes('ALERT')){
    lineEl.classList.add('warn');
  }
  const html = lineText
     .replace(/([a-f0-9]{4,})/gi, '<span class="hex">$1</span>')
     .replace(/(\b(?:\d{1,3}\.){3}\d{1,3}\b)/g, '<span class="muted">$1</span>');
  lineEl.innerHTML = html;
  codeArea.appendChild(lineEl);
  codeArea.scrollTop = codeArea.scrollHeight;

  if(Math.random() < 0.14){
    const idx = randomInt(0,nodes.length-1);
    nodes[idx].status = 'compromised';
    progress = Math.min(100, progress + randomInt(4,12));
    updateProgress();
    renderNodes();
  } else {
    if(Math.random() < 0.07){
      progress = Math.min(100, progress + 1);
      updateProgress();
    }
  }

  if(codeArea.children.length > 240){
    codeArea.removeChild(codeArea.firstChild);
  }
}

function updateProgress(){
  progBar.style.width = progress + '%';
  progBar.parentElement.setAttribute('aria-valuenow', String(progress));
}

// start streamer
let streamer = setInterval(pushLine, speed);

// controls
document.getElementById('pauseBtn').addEventListener('click', function(){
  running = !running;
  this.textContent = running ? 'Pause stream' : 'Resume stream';
});
document.getElementById('fasterBtn').addEventListener('click', function(){
  speed = Math.max(150, Math.floor(speed * 0.6));
  clearInterval(streamer);
  streamer = setInterval(pushLine, speed);
});
document.getElementById('resetBtn').addEventListener('click', function(){
  codeArea.innerHTML='';
  nodes.forEach(n=>n.status='safe');
  progress = 0;
  updateProgress();
  renderNodes();
});

// prime lines for drama
for(let i=0;i<16;i++) pushLine();

/* ===========================
   Modal countdown logic
   =========================== */
const modalBackdrop = document.getElementById('modalBackdrop');
const countdownEl = document.getElementById('countdown');
const decryptBtn = document.getElementById('decryptBtn');
const fakePayBtn = document.getElementById('fakePayBtn');

// initial countdown (minutes:seconds)
let startSeconds = 90; // 1:30
let secondsLeft = startSeconds;
countdownEl.textContent = formatTime(secondsLeft);

let countdownTimer = setInterval(()=>{
  if(secondsLeft <= 0){
    clearInterval(countdownTimer);
    countdownFinished();
    return;
  }
  secondsLeft--;
  countdownEl.textContent = formatTime(secondsLeft);
}, 1000);

function formatTime(s){
  const m = Math.floor(s/60).toString().padStart(2,'0');
  const sec = (s%60).toString().padStart(2,'0');
  return `${m}:${sec}`;
}

function countdownFinished(){
  // reveal the decryptor control (simulation only)
  decryptBtn.disabled = false;
  decryptBtn.style.cursor = 'pointer';
  decryptBtn.addEventListener('click', function(){
    // safe "decrypt" animation: clear modal and show success message
    showDecryptionSequence();
  });
  // change fakePay to show it's disabled
  fakePayBtn.textContent = 'Pay';
  fakePayBtn.style.opacity = '0.7';
  fakePayBtn.title = 'Payment';
}

// simulate decryption -> dismiss modal
function showDecryptionSequence(){
  countdownEl.textContent = '00:00';
  decryptBtn.disabled = true;
  decryptBtn.textContent = 'Decrypting...';
  // small cosmetic "decrypt" progress
  let steps = 0;
  const seq = setInterval(()=>{
    steps++;
    if(steps>=8){
      clearInterval(seq);
      // restore and dismiss modal
      decryptBtn.textContent = 'Decryptor Activated';
      setTimeout(()=>dismissModal(), 800);
      // visually recover nodes (fake)
      nodes.forEach((n,i)=>{
        if(n.status==='compromised' && Math.random() < 0.7) n.status='safe';
      });
      progress = Math.max(0, progress - randomInt(12,36));
      updateProgress();
      renderNodes();
      return;
    }
    // add a fake "decrypt" line to terminal
    const el = document.createElement('div');
    el.className='line';
    el.innerHTML = `<span class="muted">[DECRYPT] restoring cluster shard ${randHex(6)}</span>`;
    codeArea.appendChild(el);
    codeArea.scrollTop = codeArea.scrollHeight;
  }, 250);
}

function dismissModal(){
  // hide modal
  modalBackdrop.style.display = 'none';
  // reset countdown for re-open (keeps simulation safe)
  secondsLeft = startSeconds;
  countdownEl.textContent = formatTime(secondsLeft);
  // re-enable decrypt button for next time
  decryptBtn.disabled = true;
  decryptBtn.textContent = 'Activate Decryptor';
}

// accessibility: allow Esc to close only after timer finished (so user can't accidentally dismiss before)
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' && secondsLeft <= 0){
    dismissModal();
  }
});

// ensure initial focus on modal for screen readers
document.getElementById('decryptBtn').setAttribute('aria-disabled','true');
document.getElementById('fakePayBtn').setAttribute('aria-disabled','true');

</script>
</body>
</html>
